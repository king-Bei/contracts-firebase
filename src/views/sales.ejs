<%- include('partials/header') %>

<div class="d-flex justify-content-between align-items-center mb-4">
  <h1><%= title %></h1>
  <div>
    <span>你好, <%= user.name %></span>
    <a href="/logout" class="btn btn-secondary btn-sm ms-2">登出</a>
  </div>
</div>

<div class="mb-4">
  <a href="/sales/contracts/new" class="btn btn-primary btn-lg">＋ 新增合約</a>
</div>

<!-- Contract List Section -->
<div class="card shadow-sm">
  <div class="card-header">
    <h2>我的合約</h2>
  </div>
  <div class="card-body">
    <table class="table table-striped table-hover">
      <thead>
        <tr>
          <th>ID</th>
          <th>客戶名稱</th>
          <th>範本名稱</th>
          <th>狀態</th>
          <th>建立日期</th>
          <th>操作</th>
        </tr>
      </thead>
      <tbody>
        <% if(contracts && contracts.length > 0) { %>
          <% contracts.forEach(c => { %>
            <tr>
              <td><%= c.id %></td>
              <td><%= c.client_name || '-' %></td>
              <td><%= c.template_name %></td>
              <td><span class="badge bg-secondary"><%= c.status %></span></td>
              <td><%= new Date(c.created_at).toLocaleDateString() %></td>
              <td>
                <!-- Actions like edit/delete/send will be added later -->
                <button class="btn btn-sm btn-outline-primary" disabled>修改</button>
              </td>
            </tr>
          <% }) %>
        <% } else { %>
          <tr>
            <td colspan="6" class="text-center">沒有任何合約</td>
          </tr>
        <% } %>
      </tbody>
    </table>
  </div>
</div>

<%- include('partials/footer') %>
